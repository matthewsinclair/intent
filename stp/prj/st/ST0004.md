---
verblock: "06 Mar 2025:v0.1: Matthew Sinclair - Initial version"
---
# ST0004: Steel Thread Commands

- **Status**: Completed
- **Created**: 2025-03-06
- **Completed**: 2025-06-03
- **Author**: Matthew Sinclair

## Objective

Implement the steel thread command subsystem (`stp st`) to enable users to create, manage, and track steel threads throughout a project lifecycle.

## Context

Steel threads are a core concept in the STP system, representing discrete units of work that can be tracked and documented. This steel thread implements the command-line interface for managing steel threads, including creating new threads, listing existing threads, marking threads as complete, and viewing thread details.

## Approach

1. Design a command-line interface for managing steel threads
2. Implement the core `stp_st` script with subcommands
3. Create templates for steel thread documents
4. Implement a steel thread index for tracking all threads
5. Ensure user-friendly error handling and documentation

## Tasks

- [x] Design the command-line interface for `stp st`
- [x] Implement the `stp st new` command for creating new steel threads
- [x] Implement the `stp st list` command for listing all steel threads
- [x] Implement the `stp st show` command for viewing a specific thread
- [x] Implement the `stp st done` command for marking threads as complete
- [x] Implement the `stp st edit` command for opening threads in an editor
- [x] Create a steel thread index file and update mechanism
- [x] Add error handling and user-friendly messages
- [x] Write documentation for the steel thread commands

## Implementation Notes

### Command Structure

The steel thread command subsystem includes the following commands:

- `stp st new <title>` - Create a new steel thread with the given title
- `stp st list [--status <status>]` - List all steel threads, optionally filtered by status
- `stp st show <id>` - Display the contents of a specific steel thread
- `stp st done <id>` - Mark a steel thread as complete
- `stp st edit <id>` - Open a steel thread in the default editor

### Steel Thread ID Format

Steel threads follow a consistent ID format:
- IDs are in the format ST#### (e.g., ST0001)
- Numbers are padded to 4 digits with leading zeros
- IDs are automatically assigned in sequence

To improve usability, commands accept abbreviated IDs:
- Just the number (e.g., `1`)
- The number with or without leading zeros (e.g., `0001`)
- The full ID (e.g., `ST0001`)

### Steel Thread Index

The system maintains a steel thread index file (`steel_threads.md`) that:
- Lists all steel threads with their status, creation date, and completion date
- Is automatically updated when creating or marking threads as complete
- Provides a Markdown table for easy viewing
- Includes links to the individual steel thread files

### Cross-Platform Support

The `edit` command is designed to work across platforms:
- Uses `open` on macOS
- Uses `xdg-open` on Linux
- Uses `start` on Windows
- Falls back to environment variables or vi as a last resort

## Results

The steel thread command subsystem was successfully implemented with all planned functionality. The system provides:

- A user-friendly interface for managing steel threads
- Automatic generation of steel thread documents from templates
- Consistent tracking of steel thread status and metadata
- Cross-platform support for editing and viewing threads
- A formatted display of steel thread listings with proper headers

The implementation helps enforce consistency in steel thread documentation while making it easy for users to create and manage threads throughout a project lifecycle.

## Related Steel Threads

- ST0001: Directory Structure
- ST0002: Core Script Framework
- ST0003: Template System
- ST0006: Help System

## Context for LLM

This document represents a single steel thread - a self-contained unit of work focused on implementing a specific piece of functionality. When working with an LLM on this steel thread, start by sharing this document to provide context about what needs to be done.

### How to update this document

1. Update the status as work progresses
2. Check off tasks as they are completed
3. Add implementation notes as decisions are made or challenges encountered
4. Add results when the steel thread is completed
5. Mark the completion date when finished

The LLM should assist with implementation details and help maintain this document as work progresses.